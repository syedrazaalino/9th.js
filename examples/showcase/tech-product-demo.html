<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tech Product Showcase</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'Segoe UI', sans-serif;
            overflow: hidden;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #667eea 100%);
        }

        #canvas {
            display: block;
            width: 100vw;
            height: 100vh;
        }

        .tech-ui {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 25px;
            color: #333;
            min-width: 320px;
            backdrop-filter: blur(20px);
            border: 2px solid rgba(102, 126, 234, 0.3);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
            max-height: 85vh;
            overflow-y: auto;
        }

        .tech-ui h1 {
            text-align: center;
            margin-bottom: 25px;
            font-size: 26px;
            color: #667eea;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            border-bottom: 3px solid rgba(102, 126, 234, 0.3);
            padding-bottom: 10px;
            font-weight: 600;
        }

        .product-section {
            margin-bottom: 25px;
        }

        .product-section h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 18px;
            border-bottom: 2px solid rgba(102, 126, 234, 0.2);
            padding-bottom: 8px;
            font-weight: 600;
        }

        .product-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }

        .product-btn {
            padding: 12px 10px;
            border: 2px solid #667eea;
            border-radius: 12px;
            background: rgba(102, 126, 234, 0.1);
            color: #333;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.3s ease;
            font-weight: 500;
            text-align: center;
        }

        .product-btn:hover {
            background: rgba(102, 126, 234, 0.2);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
            transform: translateY(-2px);
        }

        .product-btn.active {
            background: rgba(102, 126, 234, 0.3);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
            transform: translateY(-3px);
        }

        .finish-section {
            margin-bottom: 20px;
        }

        .finish-section h4 {
            color: #764ba2;
            margin-bottom: 12px;
            font-size: 16px;
            font-weight: 600;
        }

        .finish-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
            margin-bottom: 15px;
        }

        .finish-btn {
            padding: 8px 6px;
            border: 2px solid #ddd;
            border-radius: 8px;
            background: rgba(221, 221, 221, 0.5);
            color: #333;
            cursor: pointer;
            font-size: 11px;
            transition: all 0.3s ease;
            text-align: center;
            font-weight: 500;
        }

        .finish-btn:hover {
            border-color: #667eea;
            background: rgba(102, 126, 234, 0.2);
        }

        .finish-btn.active {
            border-color: #667eea;
            background: rgba(102, 126, 234, 0.3);
            box-shadow: 0 3px 10px rgba(102, 126, 234, 0.2);
        }

        .color-section {
            margin-bottom: 20px;
        }

        .color-section h4 {
            color: #667eea;
            margin-bottom: 12px;
            font-size: 16px;
            font-weight: 600;
        }

        .color-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 6px;
            margin-bottom: 15px;
        }

        .color-option {
            width: 35px;
            height: 35px;
            border-radius: 8px;
            border: 3px solid rgba(102, 126, 234, 0.3);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .color-option:hover {
            transform: scale(1.1);
            border-color: #667eea;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .color-option.active {
            border-color: #667eea;
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.5);
        }

        .specs-section {
            margin-bottom: 20px;
        }

        .specs-section h4 {
            color: #764ba2;
            margin-bottom: 12px;
            font-size: 16px;
            font-weight: 600;
        }

        .specs-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
        }

        .spec-btn {
            padding: 8px 6px;
            border: 2px solid #ddd;
            border-radius: 8px;
            background: rgba(221, 221, 221, 0.5);
            color: #333;
            cursor: pointer;
            font-size: 11px;
            transition: all 0.3s ease;
            text-align: center;
            font-weight: 500;
        }

        .spec-btn:hover {
            border-color: #764ba2;
            background: rgba(118, 75, 162, 0.2);
        }

        .spec-btn.active {
            border-color: #764ba2;
            background: rgba(118, 75, 162, 0.3);
            box-shadow: 0 3px 10px rgba(118, 75, 162, 0.2);
        }

        .demo-controls {
            background: rgba(102, 126, 234, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            border: 2px solid rgba(102, 126, 234, 0.2);
        }

        .demo-controls h3 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 18px;
            text-align: center;
            font-weight: 600;
        }

        .control-group {
            margin-bottom: 15px;
        }

        .control-group label {
            display: block;
            margin-bottom: 8px;
            color: #667eea;
            font-size: 14px;
            font-weight: 600;
        }

        .control-slider {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #ddd;
            outline: none;
            -webkit-appearance: none;
        }

        .control-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.3);
        }

        .control-slider::-moz-range-thumb {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
            border: none;
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.3);
        }

        .control-value {
            text-align: right;
            color: #667eea;
            font-size: 12px;
            margin-top: 4px;
            font-weight: 600;
        }

        .tech-presets {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 20px;
        }

        .preset-btn {
            padding: 12px 8px;
            border: 2px solid #667eea;
            border-radius: 10px;
            background: rgba(102, 126, 234, 0.1);
            color: #333;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
            font-weight: 600;
            text-align: center;
        }

        .preset-btn:hover {
            background: rgba(102, 126, 234, 0.2);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
            transform: translateY(-2px);
        }

        .screen-toggle {
            margin-bottom: 15px;
        }

        .screen-toggle label {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #667eea;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
        }

        .screen-toggle input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: #667eea;
        }

        .scene-info {
            position: absolute;
            bottom: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            padding: 15px 20px;
            border-radius: 15px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            border: 2px solid rgba(102, 126, 234, 0.3);
            backdrop-filter: blur(10px);
        }

        .product-info {
            position: absolute;
            bottom: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            padding: 15px 20px;
            border-radius: 15px;
            border: 2px solid rgba(102, 126, 234, 0.3);
            backdrop-filter: blur(10px);
            max-width: 300px;
        }

        .product-info h4 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 14px;
            font-weight: 600;
        }

        .product-spec {
            margin-bottom: 5px;
            font-size: 12px;
            display: flex;
            justify-content: space-between;
        }

        .spec-label {
            font-weight: bold;
            color: #764ba2;
        }

        .status-indicators {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 8px;
            margin-top: 10px;
        }

        .indicator {
            text-align: center;
            padding: 6px;
            background: rgba(102, 126, 234, 0.1);
            border-radius: 6px;
            font-size: 10px;
        }

        .indicator.active {
            background: rgba(102, 126, 234, 0.3);
            color: #667eea;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            .tech-ui {
                width: 280px;
                right: 10px;
                top: 10px;
                padding: 15px;
            }
            
            .product-grid,
            .finish-options,
            .specs-grid,
            .tech-presets {
                grid-template-columns: 1fr;
            }
            
            .color-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .status-indicators {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>

    <div class="tech-ui">
        <h1>ðŸ“± Tech Product Showcase</h1>
        
        <div class="product-section">
            <h3>Product Category</h3>
            <div class="product-grid">
                <button class="product-btn active" data-product="smartphone">Smartphone</button>
                <button class="product-btn" data-product="laptop">Laptop</button>
                <button class="product-btn" data-product="tablet">Tablet</button>
                <button class="product-btn" data-product="smartwatch">Smartwatch</button>
                <button class="product-btn" data-product="headphones">Headphones</button>
                <button class="product-btn" data-product="speaker">Smart Speaker</button>
            </div>
        </div>

        <div class="finish-section">
            <h4>Finish & Material</h4>
            <div class="finish-options">
                <div class="finish-btn active" data-finish="aluminum">Aluminum</div>
                <div class="finish-btn" data-finish="glass">Glass</div>
                <div class="finish-btn" data-finish="plastic">Plastic</div>
                <div class="finish-btn" data-finish="carbon">Carbon Fiber</div>
                <div class="finish-btn" data-finish="ceramic">Ceramic</div>
                <div class="finish-btn" data-finish="titanium">Titanium</div>
            </div>
        </div>

        <div class="color-section">
            <h4>Color Options</h4>
            <div class="color-grid" id="colorGrid">
                <div class="color-option active" style="background: #000000" data-color="#000000"></div>
                <div class="color-option" style="background: #FFFFFF" data-color="#FFFFFF"></div>
                <div class="color-option" style="background: #C0C0C0" data-color="#C0C0C0"></div>
                <div class="color-option" style="background: #808080" data-color="#808080"></div>
                <div class="color-option" style="background: #0000FF" data-color="#0000FF"></div>
                <div class="color-option" style="background: #FF0000" data-color="#FF0000"></div>
                <div class="color-option" style="background: #00FF00" data-color="#00FF00"></div>
                <div class="color-option" style="background: #FFFF00" data-color="#FFFF00"></div>
            </div>
        </div>

        <div class="specs-section">
            <h4>Specifications</h4>
            <div class="specs-grid">
                <div class="spec-btn active" data-spec="base">Base Model</div>
                <div class="spec-btn" data-spec="pro">Pro Version</div>
                <div class="spec-btn" data-spec="max">Max Version</div>
                <div class="spec-btn" data-spec="gaming">Gaming Edition</div>
            </div>
        </div>

        <div class="screen-toggle">
            <label>
                <input type="checkbox" id="screenOn" checked>
                Screen Display Active
            </label>
        </div>

        <div class="demo-controls">
            <h3>âš¡ Demo Environment</h3>
            
            <div class="control-group">
                <label>Key Light:</label>
                <input type="range" class="control-slider" id="keyLight" min="0" max="150" value="100">
                <div class="control-value" id="keyValue">100%</div>
            </div>

            <div class="control-group">
                <label>Screen Brightness:</label>
                <input type="range" class="control-slider" id="screenLight" min="0" max="200" value="150">
                <div class="control-value" id="screenValue">150%</div>
            </div>

            <div class="control-group">
                <label>Ambient Light:</label>
                <input type="range" class="control-slider" id="ambientLight" min="0" max="80" value="30">
                <div class="control-value" id="ambientValue">30%</div>
            </div>

            <div class="control-group">
                <label>Reflection:</label>
                <input type="range" class="control-slider" id="reflectionLight" min="0" max="100" value="50">
                <div class="control-value" id="reflectionValue">50%</div>
            </div>

            <div class="tech-presets">
                <button class="preset-btn" onclick="setTechPreset('retail')">Retail Display</button>
                <button class="preset-btn" onclick="setTechPreset('studio')">Studio Setup</button>
                <button class="preset-btn" onclick="setTechPreset('minimal')">Minimal</button>
                <button class="preset-btn" onclick="setTechPreset('dynamic')">Dynamic</button>
            </div>
        </div>
    </div>

    <div class="scene-info">
        <div>FPS: <span id="fps">60</span></div>
        <div>Polygons: <span id="polygons">3,567</span></div>
        <div>Materials: <span id="materials">8</span></div>
        <div>Textures: <span id="textures">6</span></div>
        <div>Lights: <span id="lights">5</span></div>
    </div>

    <div class="product-info">
        <h4>Product Details</h4>
        <div class="product-spec">
            <span class="spec-label">Device:</span>
            <span id="productName">Smartphone</span>
        </div>
        <div class="product-spec">
            <span class="spec-label">Finish:</span>
            <span id="productFinish">Aluminum</span>
        </div>
        <div class="product-spec">
            <span class="spec-label">Color:</span>
            <span id="productColor">Space Gray</span>
        </div>
        <div class="product-spec">
            <span class="spec-label">Model:</span>
            <span id="productModel">Base Model</span>
        </div>
        <div class="product-spec">
            <span class="spec-label">Screen:</span>
            <span id="screenStatus">Active</span>
        </div>
        
        <div class="status-indicators">
            <div class="indicator active" id="status1">LED</div>
            <div class="indicator active" id="status2">Sensor</div>
            <div class="indicator active" id="status3">Active</div>
        </div>
    </div>

    <script src="../../dist/umd/9th.js"></script>
    <script>
        // Global variables
        let scene, camera, renderer, product, animationId;
        let keyLight, screenLight, ambientLight, reflectionLight, fillLight;
        let bodyMaterial, screenMaterial, metalMaterial, accentMaterial;
        let currentProduct = 'smartphone', currentFinish = 'aluminum', currentColor = '#000000';
        let currentSpec = 'base', screenActive = true;
        let productParts = {};
        
        const stats = {
            fps: 0,
            frameCount: 0,
            lastTime: performance.now()
        };

        // Product definitions
        const productTypes = {
            smartphone: { name: 'Smartphone', scale: 1.0, screen: true },
            laptop: { name: 'Laptop', scale: 1.2, screen: true },
            tablet: { name: 'Tablet', scale: 1.1, screen: true },
            smartwatch: { name: 'Smartwatch', scale: 0.8, screen: true },
            headphones: { name: 'Headphones', scale: 1.0, screen: false },
            speaker: { name: 'Smart Speaker', scale: 1.3, screen: false }
        };

        // Finish materials
        const finishMaterials = {
            aluminum: { color: 0xC0C0C0, metalness: 0.9, roughness: 0.2 },
            glass: { color: 0xFFFFFF, metalness: 0.0, roughness: 0.0, transparent: true, opacity: 0.1 },
            plastic: { color: 0x333333, metalness: 0.0, roughness: 0.6 },
            carbon: { color: 0x2F2F2F, metalness: 0.2, roughness: 0.4 },
            ceramic: { color: 0xF5F5F5, metalness: 0.1, roughness: 0.1 },
            titanium: { color: 0x708090, metalness: 0.8, roughness: 0.3 }
        };

        // Color names
        const colorNames = {
            '#000000': 'Space Gray',
            '#FFFFFF': 'Silver',
            '#C0C0C0': 'Platinum',
            '#808080': 'Graphite',
            '#0000FF': 'Blue',
            '#FF0000': 'Red',
            '#00FF00': 'Green',
            '#FFFF00': 'Yellow'
        };

        // Initialize the application
        function init() {
            const canvas = document.getElementById('canvas');
            
            // Create scene
            scene = new Ninth.Scene();
            scene.background = new Ninth.Color(0x1a1a1a);

            // Create camera
            camera = new Ninth.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.set(3, 2, 4);
            camera.lookAt(0, 0.5, 0);

            // Create renderer
            renderer = new Ninth.WebGLRenderer({ 
                canvas: canvas, 
                antialias: true,
                alpha: true 
            });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.shadowMap.enabled = true;
            renderer.shadowMap.type = Ninth.PCFSoftShadowMap;
            renderer.toneMapping = Ninth.ACESFilmicToneMapping;
            renderer.toneMappingExposure = 1.1;
            renderer.outputEncoding = Ninth.sRGBEncoding;

            // Setup lighting
            setupLighting();

            // Create product
            createProduct();

            // Setup environment
            createEnvironment();

            // Setup controls
            setupControls();

            // Start animation loop
            animate();
        }

        function setupLighting() {
            // Key light
            keyLight = new Ninth.SpotLight(0xffffff, 1.0, 50, Math.PI / 8, 0.3, 1);
            keyLight.position.set(5, 8, 3);
            keyLight.target.position.set(0, 0.5, 0);
            keyLight.castShadow = true;
            keyLight.shadow.mapSize.width = 1024;
            keyLight.shadow.mapSize.height = 1024;
            scene.add(keyLight);
            scene.add(keyLight.target);

            // Screen light (for products with screens)
            screenLight = new Ninth.PointLight(0x87CEEB, 1.5, 15);
            screenLight.position.set(0, 1, 2);
            scene.add(screenLight);

            // Ambient light
            ambientLight = new Ninth.AmbientLight(0x404040, 0.3);
            scene.add(ambientLight);

            // Reflection light
            reflectionLight = new Ninth.DirectionalLight(0xffffff, 0.5);
            reflectionLight.position.set(-3, 5, -3);
            scene.add(reflectionLight);

            // Fill light
            fillLight = new Ninth.DirectionalLight(0xffffff, 0.3);
            fillLight.position.set(3, 4, -2);
            scene.add(fillLight);
        }

        function createEnvironment() {
            // Display platform
            const platformGeometry = new Ninth.CylinderGeometry(2, 2.5, 0.15, 32);
            const platformMaterial = new Ninth.MeshStandardMaterial({
                color: 0x2a2a2a,
                roughness: 0.3,
                metalness: 0.7
            });
            const platform = new Ninth.Mesh(platformGeometry, platformMaterial);
            platform.position.y = -0.5;
            platform.receiveShadow = true;
            scene.add(platform);

            // Reflection surface
            const reflectionGeometry = new Ninth.PlaneGeometry(3, 3);
            const reflectionMaterial = new Ninth.MeshStandardMaterial({
                color: 0x1a1a1a,
                roughness: 0.1,
                metalness: 0.9,
                transparent: true,
                opacity: 0.3
            });
            const reflection = new Ninth.Mesh(reflectionGeometry, reflectionMaterial);
            reflection.rotation.x = -Math.PI / 2;
            reflection.position.y = -0.425;
            reflection.receiveShadow = true;
            scene.add(reflection);
        }

        function createProduct() {
            // Remove existing product
            if (product) {
                scene.remove(product);
            }

            // Create materials
            createMaterials();

            // Create product group
            product = new Ninth.Group();

            // Get product specifications
            const productSpec = productTypes[currentProduct];
            const scale = productSpec.scale;

            // Create product based on type
            switch (currentProduct) {
                case 'smartphone':
                    createSmartphone(scale);
                    break;
                case 'laptop':
                    createLaptop(scale);
                    break;
                case 'tablet':
                    createTablet(scale);
                    break;
                case 'smartwatch':
                    createSmartwatch(scale);
                    break;
                case 'headphones':
                    createHeadphones(scale);
                    break;
                case 'speaker':
                    createSpeaker(scale);
                    break;
            }

            // Position product
            product.position.y = 0;
            product.castShadow = true;
            scene.add(product);

            updateStats();
            updateProductInfo();
        }

        function createMaterials() {
            // Body material
            const finishProps = finishMaterials[currentFinish];
            bodyMaterial = new Ninth.MeshStandardMaterial({
                color: parseInt(currentColor.replace('#', '0x')),
                metalness: finishProps.metalness,
                roughness: finishProps.roughness,
                transparent: finishProps.transparent || false,
                opacity: finishProps.opacity || 1.0
            });

            // Screen material
            screenMaterial = new Ninth.MeshStandardMaterial({
                color: 0x000000,
                emissive: 0x87CEEB,
                emissiveIntensity: 1.5,
                roughness: 0.0,
                metalness: 0.0
            });

            // Metal accents
            metalMaterial = new Ninth.MeshStandardMaterial({
                color: 0xC0C0C0,
                metalness: 0.9,
                roughness: 0.1
            });

            // Accent material
            accentMaterial = new Ninth.MeshStandardMaterial({
                color: 0x667eea,
                metalness: 0.6,
                roughness: 0.3
            });
        }

        function createSmartphone(scale) {
            // Main body
            const bodyGeometry = new Ninth.BoxGeometry(0.7 * scale, 1.4 * scale, 0.08 * scale);
            const body = new Ninth.Mesh(bodyGeometry, bodyMaterial);
            body.castShadow = true;
            product.add(body);

            // Screen
            const screenGeometry = new Ninth.PlaneGeometry(0.65 * scale, 1.3 * scale);
            const screen = new Ninth.Mesh(screenGeometry, screenMaterial);
            screen.position.z = 0.041 * scale;
            screen.castShadow = false;
            product.add(screen);

            // Side buttons
            const buttonGeometry = new Ninth.BoxGeometry(0.05 * scale, 0.2 * scale, 0.02 * scale);
            
            const powerButton = new Ninth.Mesh(buttonGeometry, metalMaterial);
            powerButton.position.set(0.375 * scale, 0.2 * scale, 0.05 * scale);
            powerButton.castShadow = true;
            product.add(powerButton);

            const volumeButton = new Ninth.Mesh(buttonGeometry, metalMaterial);
            volumeButton.position.set(0.375 * scale, -0.2 * scale, 0.05 * scale);
            volumeButton.castShadow = true;
            product.add(volumeButton);

            // Camera module
            const cameraGeometry = new Ninth.CylinderGeometry(0.08 * scale, 0.08 * scale, 0.05 * scale, 16);
            const cameraModule = new Ninth.Mesh(cameraGeometry, metalMaterial);
            cameraModule.position.set(-0.25 * scale, 0.5 * scale, 0.065 * scale);
            cameraModule.castShadow = true;
            product.add(cameraModule);

            // Camera lens
            const lensGeometry = new Ninth.CircleGeometry(0.06 * scale, 16);
            const lens = new Ninth.Mesh(lensGeometry, screenMaterial);
            lens.position.set(-0.25 * scale, 0.5 * scale, 0.095 * scale);
            lens.rotation.x = Math.PI / 2;
            product.add(lens);

            // Add screen glow if active
            if (screenActive) {
                screenLight.intensity = 1.5;
            } else {
                screenLight.intensity = 0;
            }
        }

        function createLaptop(scale) {
            // Base
            const baseGeometry = new Ninth.BoxGeometry(2.2 * scale, 0.05 * scale, 1.4 * scale);
            const base = new Ninth.Mesh(baseGeometry, bodyMaterial);
            base.position.y = 0.25 * scale;
            base.castShadow = true;
            product.add(base);

            // Screen
            const screenGeometry = new Ninth.PlaneGeometry(2.0 * scale, 1.2 * scale);
            const screen = new Ninth.Mesh(screenGeometry, screenMaterial);
            screen.position.set(0, 0.9 * scale, -0.7 * scale);
            screen.rotation.x = Math.PI / 2;
            screen.castShadow = false;
            product.add(screen);

            // Keyboard
            const keyboardGeometry = new Ninth.PlaneGeometry(1.8 * scale, 1.0 * scale);
            const keyboardMaterial = new Ninth.MeshStandardMaterial({
                color: 0x2a2a2a,
                roughness: 0.7,
                metalness: 0.1
            });
            const keyboard = new Ninth.Mesh(keyboardGeometry, keyboardMaterial);
            keyboard.position.set(0, 0.275 * scale, -0.1 * scale);
            keyboard.rotation.x = -Math.PI / 2;
            keyboard.receiveShadow = true;
            product.add(keyboard);

            // Trackpad
            const trackpadGeometry = new Ninth.PlaneGeometry(0.3 * scale, 0.2 * scale);
            const trackpadMaterial = new Ninth.MeshStandardMaterial({
                color: 0x333333,
                roughness: 0.5,
                metalness: 0.2
            });
            const trackpad = new Ninth.Mesh(trackpadGeometry, trackpadMaterial);
            trackpad.position.set(0, 0.275 * scale, 0.3 * scale);
            trackpad.rotation.x = -Math.PI / 2;
            trackpad.receiveShadow = true;
            product.add(trackpad);

            // Hinge
            const hingeGeometry = new Ninth.BoxGeometry(2.0 * scale, 0.08 * scale, 0.05 * scale);
            const hinge = new Ninth.Mesh(hingeGeometry, metalMaterial);
            hinge.position.set(0, 0.5 * scale, -0.6 * scale);
            hinge.castShadow = true;
            product.add(hinge);

            if (screenActive) {
                screenLight.intensity = 1.2;
            } else {
                screenLight.intensity = 0;
            }
        }

        function createTablet(scale) {
            // Main body
            const bodyGeometry = new Ninth.BoxGeometry(1.0 * scale, 1.4 * scale, 0.08 * scale);
            const body = new Ninth.Mesh(bodyGeometry, bodyMaterial);
            body.castShadow = true;
            product.add(body);

            // Screen
            const screenGeometry = new Ninth.PlaneGeometry(0.9 * scale, 1.3 * scale);
            const screen = new Ninth.Mesh(screenGeometry, screenMaterial);
            screen.position.z = 0.041 * scale;
            screen.castShadow = false;
            product.add(screen);

            // Side buttons
            const buttonGeometry = new Ninth.BoxGeometry(0.03 * scale, 0.15 * scale, 0.02 * scale);
            
            const powerButton = new Ninth.Mesh(buttonGeometry, metalMaterial);
            powerButton.position.set(0.515 * scale, 0.3 * scale, 0.05 * scale);
            powerButton.castShadow = true;
            product.add(powerButton);

            const volumeButton = new Ninth.Mesh(buttonGeometry, metalMaterial);
            volumeButton.position.set(0.515 * scale, 0.1 * scale, 0.05 * scale);
            volumeButton.castShadow = true;
            product.add(volumeButton);

            // Camera
            const cameraGeometry = new Ninth.CylinderGeometry(0.06 * scale, 0.06 * scale, 0.03 * scale, 16);
            const camera = new Ninth.Mesh(cameraGeometry, metalMaterial);
            camera.position.set(-0.35 * scale, 0.6 * scale, 0.055 * scale);
            camera.castShadow = true;
            product.add(camera);

            if (screenActive) {
                screenLight.intensity = 1.3;
            } else {
                screenLight.intensity = 0;
            }
        }

        function createSmartwatch(scale) {
            // Watch body
            const bodyGeometry = new Ninth.CylinderGeometry(0.6 * scale, 0.6 * scale, 0.15 * scale, 32);
            const body = new Ninth.Mesh(bodyGeometry, bodyMaterial);
            body.castShadow = true;
            product.add(body);

            // Screen
            const screenGeometry = new Ninth.CylinderGeometry(0.45 * scale, 0.45 * scale, 0.02 * scale, 32);
            const screen = new Ninth.Mesh(screenGeometry, screenMaterial);
            screen.position.y = 0.065 * scale;
            screen.castShadow = false;
            product.add(screen);

            // Crown
            const crownGeometry = new Ninth.CylinderGeometry(0.08 * scale, 0.08 * scale, 0.2 * scale, 8);
            const crown = new Ninth.Mesh(crownGeometry, metalMaterial);
            crown.position.set(0.7 * scale, 0, 0);
            crown.rotation.z = Math.PI / 2;
            crown.castShadow = true;
            product.add(crown);

            // Strap
            const strapGeometry = new Ninth.BoxGeometry(0.15 * scale, 1.8 * scale, 0.1 * scale);
            const strapMaterial = new Ninth.MeshStandardMaterial({
                color: 0x2F2F2F,
                roughness: 0.6,
                metalness: 0.1
            });
            const strap = new Ninth.Mesh(strapGeometry, strapMaterial);
            strap.position.y = -1.2 * scale;
            strap.castShadow = true;
            product.add(strap);

            if (screenActive) {
                screenLight.intensity = 1.0;
            } else {
                screenLight.intensity = 0;
            }
        }

        function createHeadphones(scale) {
            // Headband
            const headbandGeometry = new Ninth.TorusGeometry(1.2 * scale, 0.1 * scale, 8, 32);
            const headband = new Ninth.Mesh(headbandGeometry, bodyMaterial);
            headband.position.y = 0.8 * scale;
            headband.rotation.x = Math.PI / 2;
            headband.castShadow = true;
            product.add(headband);

            // Left earpiece
            const earpieceGeometry = new Ninth.CylinderGeometry(0.4 * scale, 0.4 * scale, 0.3 * scale, 16);
            const leftEarpiece = new Ninth.Mesh(earpieceGeometry, bodyMaterial);
            leftEarpiece.position.set(-1.0 * scale, 0.3 * scale, 0);
            leftEarpiece.rotation.z = Math.PI / 2;
            leftEarpiece.castShadow = true;
            product.add(leftEarpiece);

            // Right earpiece
            const rightEarpiece = new Ninth.Mesh(earpieceGeometry, bodyMaterial);
            rightEarpiece.position.set(1.0 * scale, 0.3 * scale, 0);
            rightEarpiece.rotation.z = -Math.PI / 2;
            rightEarpiece.castShadow = true;
            product.add(rightEarpiece);

            // Earpiece cushions
            const cushionGeometry = new Ninth.CylinderGeometry(0.35 * scale, 0.35 * scale, 0.05 * scale, 16);
            const cushionMaterial = new Ninth.MeshStandardMaterial({
                color: 0x1a1a1a,
                roughness: 0.8,
                metalness: 0.0
            });
            
            const leftCushion = new Ninth.Mesh(cushionGeometry, cushionMaterial);
            leftCushion.position.set(-1.0 * scale, 0.3 * scale, 0.15 * scale);
            leftCushion.rotation.z = Math.PI / 2;
            product.add(leftCushion);

            const rightCushion = new Ninth.Mesh(cushionGeometry, cushionMaterial);
            rightCushion.position.set(1.0 * scale, 0.3 * scale, 0.15 * scale);
            rightCushion.rotation.z = -Math.PI / 2;
            product.add(rightCushion);

            screenLight.intensity = 0; // No screen for headphones
        }

        function createSpeaker(scale) {
            // Main body
            const bodyGeometry = new Ninth.CylinderGeometry(0.8 * scale, 1.0 * scale, 2.0 * scale, 32);
            const body = new Ninth.Mesh(bodyGeometry, bodyMaterial);
            body.position.y = 1.0 * scale;
            body.castShadow = true;
            product.add(body);

            // Top panel
            const topGeometry = new Ninth.CylinderGeometry(0.8 * scale, 0.8 * scale, 0.1 * scale, 32);
            const top = new Ninth.Mesh(topGeometry, metalMaterial);
            top.position.y = 2.05 * scale;
            top.castShadow = true;
            product.add(top);

            // Control panel
            const panelGeometry = new Ninth.PlaneGeometry(0.6 * scale, 0.8 * scale);
            const panelMaterial = new Ninth.MeshStandardMaterial({
                color: 0x2a2a2a,
                roughness: 0.4,
                metalness: 0.3
            });
            const panel = new Ninth.Mesh(panelGeometry, panelMaterial);
            panel.position.set(0, 1.2 * scale, 0.8 * scale);
            panel.castShadow = true;
            product.add(panel);

            // Volume buttons
            const buttonGeometry = new Ninth.CylinderGeometry(0.04 * scale, 0.04 * scale, 0.02 * scale, 8);
            
            const volumeUp = new Ninth.Mesh(buttonGeometry, accentMaterial);
            volumeUp.position.set(-0.15 * scale, 1.4 * scale, 0.81 * scale);
            volumeUp.castShadow = true;
            product.add(volumeUp);

            const volumeDown = new Ninth.Mesh(buttonGeometry, accentMaterial);
            volumeDown.position.set(0.15 * scale, 1.4 * scale, 0.81 * scale);
            volumeDown.castShadow = true;
            product.add(volumeDown);

            screenLight.intensity = 0; // No screen for speaker
        }

        function setupControls() {
            // Product type buttons
            document.querySelectorAll('.product-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.product-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    currentProduct = this.dataset.product;
                    createProduct();
                });
            });

            // Finish buttons
            document.querySelectorAll('.finish-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.finish-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    currentFinish = this.dataset.finish;
                    createProduct();
                });
            });

            // Color selection
            document.querySelectorAll('.color-option').forEach(color => {
                color.addEventListener('click', function() {
                    document.querySelectorAll('.color-option').forEach(c => c.classList.remove('active'));
                    this.classList.add('active');
                    currentColor = this.dataset.color;
                    createProduct();
                });
            });

            // Spec buttons
            document.querySelectorAll('.spec-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.spec-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    currentSpec = this.dataset.spec;
                    createProduct();
                });
            });

            // Screen toggle
            document.getElementById('screenOn').addEventListener('change', function() {
                screenActive = this.checked;
                createProduct();
                updateProductInfo();
            });

            // Lighting controls
            const lightControls = [
                { id: 'keyLight', obj: keyLight, valueId: 'keyValue', suffix: '%' },
                { id: 'screenLight', obj: screenLight, valueId: 'screenValue', suffix: '%' },
                { id: 'ambientLight', obj: ambientLight, valueId: 'ambientValue', suffix: '%' },
                { id: 'reflectionLight', obj: reflectionLight, valueId: 'reflectionValue', suffix: '%' }
            ];

            lightControls.forEach(control => {
                const element = document.getElementById(control.id);
                const valueElement = document.getElementById(control.valueId);
                
                element.addEventListener('input', function() {
                    const value = parseFloat(this.value);
                    control.obj.intensity = value / 100;
                    valueElement.textContent = value + control.suffix;
                });
            });
        }

        function updateProductInfo() {
            const productNames = {
                smartphone: 'Smartphone',
                laptop: 'Laptop',
                tablet: 'Tablet',
                smartwatch: 'Smartwatch',
                headphones: 'Headphones',
                speaker: 'Smart Speaker'
            };

            const finishNames = {
                aluminum: 'Aluminum',
                glass: 'Glass',
                plastic: 'Plastic',
                carbon: 'Carbon Fiber',
                ceramic: 'Ceramic',
                titanium: 'Titanium'
            };

            const specNames = {
                base: 'Base Model',
                pro: 'Pro Version',
                max: 'Max Version',
                gaming: 'Gaming Edition'
            };

            document.getElementById('productName').textContent = productNames[currentProduct];
            document.getElementById('productFinish').textContent = finishNames[currentFinish];
            document.getElementById('productColor').textContent = colorNames[currentColor] || 'Custom';
            document.getElementById('productModel').textContent = specNames[currentSpec];
            document.getElementById('screenStatus').textContent = screenActive ? 'Active' : 'Off';

            // Update status indicators
            const status1 = document.getElementById('status1');
            const status2 = document.getElementById('status2');
            const status3 = document.getElementById('status3');

            if (currentProduct === 'smartphone' || currentProduct === 'tablet') {
                status1.textContent = 'LED';
                status2.textContent = 'Camera';
                status3.textContent = 'Active';
            } else if (currentProduct === 'laptop') {
                status1.textContent = 'Screen';
                status2.textContent = 'Keyboard';
                status3.textContent = 'Active';
            } else if (currentProduct === 'smartwatch') {
                status1.textContent = 'Display';
                status2.textContent = 'Heart';
                status3.textContent = 'Active';
            } else {
                status1.textContent = 'Audio';
                status2.textContent = 'Bluetooth';
                status3.textContent = 'Active';
            }
        }

        function setTechPreset(preset) {
            const presets = {
                retail: { key: 100, screen: 150, ambient: 30, reflection: 50 },
                studio: { key: 120, screen: 120, ambient: 40, reflection: 70 },
                minimal: { key: 80, screen: 100, ambient: 50, reflection: 30 },
                dynamic: { key: 150, screen: 200, ambient: 20, reflection: 80 }
            };

            const p = presets[preset];
            if (p) {
                document.getElementById('keyLight').value = p.key;
                document.getElementById('screenLight').value = p.screen;
                document.getElementById('ambientLight').value = p.ambient;
                document.getElementById('reflectionLight').value = p.reflection;
                
                keyLight.intensity = p.key / 100;
                screenLight.intensity = p.screen / 100;
                ambientLight.intensity = p.ambient / 100;
                reflectionLight.intensity = p.reflection / 100;
                
                document.getElementById('keyValue').textContent = p.key + '%';
                document.getElementById('screenValue').textContent = p.screen + '%';
                document.getElementById('ambientValue').textContent = p.ambient + '%';
                document.getElementById('reflectionValue').textContent = p.reflection + '%';
            }
        }

        function updateStats() {
            document.getElementById('materials').textContent = '8';
            document.getElementById('textures').textContent = '6';
            document.getElementById('lights').textContent = '5';
            document.getElementById('polygons').textContent = '3,567';
        }

        function animate() {
            animationId = requestAnimationFrame(animate);

            // Update FPS counter
            const now = performance.now();
            stats.frameCount++;
            
            if (now - stats.lastTime >= 1000) {
                stats.fps = Math.round((stats.frameCount * 1000) / (now - stats.lastTime));
                document.getElementById('fps').textContent = stats.fps;
                stats.frameCount = 0;
                stats.lastTime = now;
            }

            // Gentle rotation for showcase
            if (product) {
                product.rotation.y += 0.005;
                
                // Animate screen glow if active
                if (screenActive && productTypes[currentProduct].screen) {
                    const glowIntensity = 1.2 + Math.sin(Date.now() * 0.003) * 0.3;
                    screenLight.intensity = glowIntensity;
                }
            }

            // Render
            renderer.render(scene, camera);
        }

        // Handle window resize
        window.addEventListener('resize', function() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        // Initialize when page loads
        window.addEventListener('load', init);
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Virtual Museum - Cultural Heritage Experience</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            font-family: 'Arial', sans-serif;
            overflow: hidden;
        }
        
        #canvas {
            display: block;
            width: 100vw;
            height: 100vh;
        }
        
        .ui-panel {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 20px;
            border-radius: 10px;
            font-size: 14px;
            max-width: 300px;
            z-index: 100;
        }
        
        .artwork-info {
            position: absolute;
            bottom: 20px;
            left: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 20px;
            border-radius: 10px;
            font-size: 14px;
            z-index: 100;
            transform: translateY(100%);
            transition: transform 0.3s ease;
        }
        
        .artwork-info.active {
            transform: translateY(0);
        }
        
        .artwork-title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #ffd700;
        }
        
        .artwork-artist {
            font-size: 16px;
            color: #aaa;
            margin-bottom: 10px;
        }
        
        .artwork-description {
            line-height: 1.6;
        }
        
        .gallery-nav {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            padding: 15px;
            border-radius: 25px;
            display: flex;
            gap: 15px;
            z-index: 100;
        }
        
        .nav-button {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
        }
        
        .nav-button:hover, .nav-button.active {
            background: rgba(255, 215, 0, 0.3);
            border-color: #ffd700;
        }
        
        .mode-selector {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.8);
            padding: 15px;
            border-radius: 10px;
            z-index: 100;
        }
        
        .mode-button {
            display: block;
            width: 100%;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
        }
        
        .mode-button:hover, .mode-button.active {
            background: rgba(255, 215, 0, 0.3);
            border-color: #ffd700;
        }
        
        .loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 18px;
            z-index: 200;
        }
    </style>
</head>
<body>
    <div class="loading" id="loading">Loading Virtual Museum...</div>
    <canvas id="canvas"></canvas>
    
    <div class="ui-panel">
        <h3>Virtual Museum</h3>
        <p><strong>Controls:</strong></p>
        <p>• WASD - Move around<br>
        • Mouse - Look around<br>
        • Click on artwork - View details<br>
        • Spacebar - Toggle walk/fly mode</p>
    </div>
    
    <div class="mode-selector" id="modeSelector">
        <h4 style="color: white; margin: 0 0 10px 0;">Gallery Mode</h4>
        <button class="mode-button active" data-mode="classical">Classical Art</button>
        <button class="mode-button" data-mode="modern">Modern Art</button>
        <button class="mode-button" data-mode="sculpture">Sculpture Gallery</button>
        <button class="mode-button" data-mode="historical">Historical Artifacts</button>
    </div>
    
    <div class="gallery-nav" id="galleryNav">
        <button class="nav-button active">Room 1</button>
        <button class="nav-button">Room 2</button>
        <button class="nav-button">Room 3</button>
        <button class="nav-button">Main Hall</button>
    </div>
    
    <div class="artwork-info" id="artworkInfo">
        <div class="artwork-title">Artwork Title</div>
        <div class="artwork-artist">Artist Name</div>
        <div class="artwork-description">Artwork description and historical context...</div>
    </div>

    <script>
        class VirtualMuseum {
            constructor() {
                this.canvas = document.getElementById('canvas');
                this.ctx = this.canvas.getContext('2d');
                this.setupCanvas();
                this.setupEventListeners();
                
                // Camera and controls
                this.camera = {
                    x: 0,
                    y: 2,
                    z: 0,
                    pitch: 0,
                    yaw: 0,
                    velocity: { x: 0, y: 0, z: 0 },
                    mode: 'walk' // 'walk' or 'fly'
                };
                
                this.keys = {};
                
                // Museum data
                this.galleries = {
                    classical: {
                        name: 'Classical Art Gallery',
                        artworks: [
                            {
                                title: 'The Birth of Venus',
                                artist: 'Sandro Botticelli',
                                year: '1486',
                                description: 'A masterpiece of Florentine Renaissance painting, depicting the goddess Venus emerging from the sea as a fully grown woman.',
                                position: { x: -8, y: 1.5, z: -6 },
                                size: { width: 2, height: 2.5 }
                            },
                            {
                                title: 'Mona Lisa',
                                artist: 'Leonardo da Vinci',
                                year: '1503-1506',
                                description: 'Perhaps the most famous painting in the world, known for her enigmatic smile and revolutionary painting techniques.',
                                position: { x: 0, y: 1.5, z: -6 },
                                size: { width: 1.5, height: 2.3 }
                            },
                            {
                                title: 'The Last Supper',
                                artist: 'Leonardo da Vinci',
                                year: '1495-1498',
                                description: 'A mural painting depicting the moment Jesus announces that one of his twelve disciples will betray him.',
                                position: { x: 8, y: 1.5, z: -6 },
                                size: { width: 3.5, height: 1.8 }
                            }
                        ]
                    },
                    modern: {
                        name: 'Modern Art Gallery',
                        artworks: [
                            {
                                title: 'Les Demoiselles d\'Avignon',
                                artist: 'Pablo Picasso',
                                year: '1907',
                                description: 'A revolutionary work that established the foundations of Cubism, depicting five nude women with mask-like faces.',
                                position: { x: -8, y: 1.5, z: -6 },
                                size: { width: 2.4, height: 2.3 }
                            },
                            {
                                title: 'The Persistence of Memory',
                                artist: 'Salvador Dalí',
                                year: '1931',
                                description: 'A surrealist masterpiece featuring melting clocks, exploring themes of time, memory, and dreams.',
                                position: { x: 0, y: 1.5, z: -6 },
                                size: { width: 1.8, height: 1.4 }
                            },
                            {
                                title: 'Starry Night',
                                artist: 'Vincent van Gogh',
                                year: '1889',
                                description: 'A post-impressionist masterpiece depicting the view from the east-facing window of his asylum room.',
                                position: { x: 8, y: 1.5, z: -6 },
                                size: { width: 1.8, height: 1.4 }
                            }
                        ]
                    },
                    sculpture: {
                        name: 'Sculpture Gallery',
                        artworks: [
                            {
                                title: 'The Thinker',
                                artist: 'Auguste Rodin',
                                year: '1880',
                                description: 'A bronze sculpture depicting a man contemplating, symbolizing philosophy and intellectual labor.',
                                position: { x: -5, y: 0, z: -8 },
                                size: { width: 1, height: 1.8 }
                            },
                            {
                                title: 'David',
                                artist: 'Michelangelo',
                                year: '1501-1504',
                                description: 'A masterpiece of Renaissance sculpture, representing the biblical hero David before his battle with Goliath.',
                                position: { x: 0, y: 0, z: -8 },
                                size: { width: 1, height: 2.1 }
                            },
                            {
                                title: 'The Thinker',
                                artist: 'Auguste Rodin',
                                year: '1880',
                                description: 'Another interpretation of contemplative sculpture, exploring human thought and reflection.',
                                position: { x: 5, y: 0, z: -8 },
                                size: { width: 1, height: 1.8 }
                            }
                        ]
                    },
                    historical: {
                        name: 'Historical Artifacts',
                        artworks: [
                            {
                                title: 'Ancient Egyptian Sarcophagus',
                                artist: 'Unknown Egyptian Artisan',
                                year: 'c. 1000 BCE',
                                description: 'A beautifully preserved sarcophagus from ancient Egypt, featuring hieroglyphs and religious imagery.',
                                position: { x: -6, y: 0.5, z: -7 },
                                size: { width: 1.2, height: 1.5 }
                            },
                            {
                                title: 'Roman Amphora',
                                artist: 'Unknown Roman Potter',
                                year: 'c. 100 CE',
                                description: 'A clay vessel used by ancient Romans for storing wine and oil, decorated with traditional motifs.',
                                position: { x: 0, y: 0.5, z: -7 },
                                size: { width: 0.8, height: 1.2 }
                            },
                            {
                                title: 'Medieval Illuminated Manuscript',
                                artist: 'Monastic Scribe',
                                year: 'c. 1200 CE',
                                description: 'An ornate religious manuscript with intricate illustrations and gold leaf decorations.',
                                position: { x: 6, y: 1.5, z: -7 },
                                size: { width: 1.5, height: 1.8 }
                            }
                        ]
                    }
                };
                
                this.currentGallery = 'classical';
                this.selectedArtwork = null;
                this.raycaster = new Raycaster();
                this.mouse = { x: 0, y: 0 };
                
                this.init();
            }
            
            setupCanvas() {
                this.canvas.width = window.innerWidth;
                this.canvas.height = window.innerHeight;
                
                window.addEventListener('resize', () => {
                    this.canvas.width = window.innerWidth;
                    this.canvas.height = window.innerHeight;
                    this.camera.aspect = this.canvas.width / this.canvas.height;
                });
            }
            
            setupEventListeners() {
                // Mouse and keyboard controls
                this.canvas.addEventListener('mousemove', (e) => {
                    if (document.pointerLockElement === this.canvas) {
                        this.camera.yaw += e.movementX * 0.002;
                        this.camera.pitch -= e.movementY * 0.002;
                        this.camera.pitch = Math.max(-Math.PI/2, Math.min(Math.PI/2, this.camera.pitch));
                    } else {
                        this.mouse.x = (e.clientX / this.canvas.width) * 2 - 1;
                        this.mouse.y = -(e.clientY / this.canvas.height) * 2 + 1;
                    }
                });
                
                this.canvas.addEventListener('click', (e) => {
                    if (document.pointerLockElement !== this.canvas) {
                        this.canvas.requestPointerLock();
                    } else {
                        this.handleClick();
                    }
                });
                
                document.addEventListener('keydown', (e) => {
                    this.keys[e.code] = true;
                    
                    if (e.code === 'Space') {
                        e.preventDefault();
                        this.camera.mode = this.camera.mode === 'walk' ? 'fly' : 'walk';
                    }
                });
                
                document.addEventListener('keyup', (e) => {
                    this.keys[e.code] = false;
                });
                
                // Gallery navigation
                document.querySelectorAll('.nav-button').forEach((button, index) => {
                    button.addEventListener('click', () => {
                        this.navigateToRoom(index);
                    });
                });
                
                // Mode selector
                document.querySelectorAll('.mode-button').forEach(button => {
                    button.addEventListener('click', () => {
                        document.querySelectorAll('.mode-button').forEach(b => b.classList.remove('active'));
                        button.classList.add('active');
                        this.switchGallery(button.dataset.mode);
                    });
                });
            }
            
            init() {
                this.loadingElement = document.getElementById('loading');
                
                // Simulate loading
                setTimeout(() => {
                    this.loadingElement.style.display = 'none';
                    this.animate();
                }, 2000);
            }
            
            switchGallery(galleryType) {
                this.currentGallery = galleryType;
                this.selectedArtwork = null;
                this.updateArtworkInfo();
            }
            
            navigateToRoom(roomIndex) {
                const positions = [
                    { x: 0, y: 2, z: 0 },    // Room 1
                    { x: 15, y: 2, z: 0 },   // Room 2
                    { x: 30, y: 2, z: 0 },   // Room 3
                    { x: 45, y: 2, z: 0 }    // Main Hall
                ];
                
                if (roomIndex < positions.length) {
                    this.camera.x = positions[roomIndex].x;
                    this.camera.y = positions[roomIndex].y;
                    this.camera.z = positions[roomIndex].z;
                    
                    document.querySelectorAll('.nav-button').forEach(b => b.classList.remove('active'));
                    document.querySelectorAll('.nav-button')[roomIndex].classList.add('active');
                }
            }
            
            handleClick() {
                // Ray casting for artwork selection
                const artwork = this.getArtworkAtMouse();
                if (artwork) {
                    this.selectedArtwork = artwork;
                    this.updateArtworkInfo();
                } else {
                    this.selectedArtwork = null;
                    this.updateArtworkInfo();
                }
            }
            
            getArtworkAtMouse() {
                // Simplified ray casting - in real implementation would use proper 3D ray casting
                const gallery = this.galleries[this.currentGallery];
                
                for (let artwork of gallery.artworks) {
                    const screenPos = this.worldToScreen(artwork.position);
                    const distance = Math.sqrt(
                        Math.pow(screenPos.x - (this.mouse.x * this.canvas.width / 2 + this.canvas.width / 2), 2) +
                        Math.pow(screenPos.y - (this.mouse.y * this.canvas.height / 2 + this.canvas.height / 2), 2)
                    );
                    
                    if (distance < 100) { // Click threshold
                        return artwork;
                    }
                }
                return null;
            }
            
            worldToScreen(position) {
                // Simplified 2D projection
                const dx = position.x - this.camera.x;
                const dy = position.y - this.camera.y;
                const dz = position.z - this.camera.z;
                
                const cosYaw = Math.cos(this.camera.yaw);
                const sinYaw = Math.sin(this.camera.yaw);
                
                const rotatedX = dx * cosYaw - dz * sinYaw;
                const rotatedZ = dx * sinYaw + dz * cosYaw;
                
                const perspective = 1 / (rotatedZ * 0.1);
                
                return {
                    x: this.canvas.width / 2 + rotatedX * perspective * 300,
                    y: this.canvas.height / 2 - rotatedY * perspective * 300
                };
            }
            
            updateArtworkInfo() {
                const infoPanel = document.getElementById('artworkInfo');
                
                if (this.selectedArtwork) {
                    infoPanel.querySelector('.artwork-title').textContent = this.selectedArtwork.title;
                    infoPanel.querySelector('.artwork-artist').textContent = 
                        `${this.selectedArtwork.artist} (${this.selectedArtwork.year})`;
                    infoPanel.querySelector('.artwork-description').textContent = this.selectedArtwork.description;
                    infoPanel.classList.add('active');
                } else {
                    infoPanel.classList.remove('active');
                }
            }
            
            updateCamera() {
                const speed = 0.1;
                const cosYaw = Math.cos(this.camera.yaw);
                const sinYaw = Math.sin(this.camera.yaw);
                
                if (this.keys['KeyW']) {
                    this.camera.x += sinYaw * speed;
                    this.camera.z += cosYaw * speed;
                }
                if (this.keys['KeyS']) {
                    this.camera.x -= sinYaw * speed;
                    this.camera.z -= cosYaw * speed;
                }
                if (this.keys['KeyA']) {
                    this.camera.x -= cosYaw * speed;
                    this.camera.z += sinYaw * speed;
                }
                if (this.keys['KeyD']) {
                    this.camera.x += cosYaw * speed;
                    this.camera.z -= sinYaw * speed;
                }
                
                if (this.camera.mode === 'fly') {
                    if (this.keys['Space']) this.camera.y += speed;
                    if (this.keys['ShiftLeft']) this.camera.y -= speed;
                }
            }
            
            drawMuseum() {
                // Draw floor
                this.ctx.fillStyle = '#2c2c2c';
                this.ctx.fillRect(0, this.canvas.height * 0.6, this.canvas.width, this.canvas.height * 0.4);
                
                // Draw walls and ceiling (simplified 3D effect)
                this.drawWalls();
                this.drawCeiling();
            }
            
            drawWalls() {
                // Back wall
                this.ctx.fillStyle = '#1a1a1a';
                this.drawWall(-20, this.canvas.height * 0.3, 40, this.canvas.height * 0.3);
                
                // Side walls
                this.drawWall(-25, 0, 5, this.canvas.height);
                this.drawWall(20, 0, 5, this.canvas.height);
            }
            
            drawWall(x, y, width, height) {
                this.ctx.fillRect(x, y, width, height);
            }
            
            drawCeiling() {
                this.ctx.fillStyle = '#333';
                this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height * 0.3);
            }
            
            drawArtworks() {
                const gallery = this.galleries[this.currentGallery];
                
                gallery.artworks.forEach(artwork => {
                    const screenPos = this.worldToScreen(artwork.position);
                    
                    // Draw frame
                    this.ctx.fillStyle = '#8B4513';
                    this.ctx.fillRect(
                        screenPos.x - artwork.size.width * 30,
                        screenPos.y - artwork.size.height * 30,
                        artwork.size.width * 60,
                        artwork.size.height * 60
                    );
                    
                    // Draw artwork content (simplified representation)
                    this.drawArtworkContent(artwork, screenPos, artwork.size);
                    
                    // Draw selection highlight
                    if (this.selectedArtwork === artwork) {
                        this.ctx.strokeStyle = '#ffd700';
                        this.ctx.lineWidth = 3;
                        this.ctx.strokeRect(
                            screenPos.x - artwork.size.width * 30,
                            screenPos.y - artwork.size.height * 30,
                            artwork.size.width * 60,
                            artwork.size.height * 60
                        );
                    }
                });
            }
            
            drawArtworkContent(artwork, position, size) {
                const padding = 10;
                const x = position.x - size.width * 30 + padding;
                const y = position.y - size.height * 30 + padding;
                const width = size.width * 60 - padding * 2;
                const height = size.height * 60 - padding * 2;
                
                // Different art styles based on gallery
                this.ctx.fillStyle = this.getArtworkColor(artwork);
                this.ctx.fillRect(x, y, width, height);
                
                // Add artistic details
                if (this.currentGallery === 'classical') {
                    this.drawClassicalDetails(x, y, width, height);
                } else if (this.currentGallery === 'modern') {
                    this.drawModernDetails(x, y, width, height);
                } else if (this.currentGallery === 'sculpture') {
                    this.drawSculptureDetails(x, y, width, height);
                } else if (this.currentGallery === 'historical') {
                    this.drawHistoricalDetails(x, y, width, height);
                }
            }
            
            getArtworkColor(artwork) {
                const colors = {
                    'The Birth of Venus': '#FFB6C1',
                    'Mona Lisa': '#8B4513',
                    'The Last Supper': '#4B0082',
                    'Les Demoiselles d\'Avignon': '#FF4500',
                    'The Persistence of Memory': '#32CD32',
                    'Starry Night': '#4169E1',
                    'The Thinker': '#696969',
                    'David': '#D3D3D3',
                    'Ancient Egyptian Sarcophagus': '#CD853F',
                    'Roman Amphora': '#D2691E',
                    'Medieval Illuminated Manuscript': '#800080'
                };
                return colors[artwork.title] || '#8B8B8B';
            }
            
            drawClassicalDetails(x, y, width, height) {
                // Draw classical art details
                this.ctx.fillStyle = '#FFD700';
                for (let i = 0; i < 3; i++) {
                    const circleX = x + width * (0.3 + i * 0.2);
                    const circleY = y + height * 0.4;
                    this.ctx.beginPath();
                    this.ctx.arc(circleX, circleY, 5, 0, Math.PI * 2);
                    this.ctx.fill();
                }
            }
            
            drawModernDetails(x, y, width, height) {
                // Draw modern art geometric shapes
                this.ctx.fillStyle = '#FF0000';
                this.ctx.fillRect(x + 10, y + 10, 20, 20);
                
                this.ctx.fillStyle = '#0000FF';
                this.ctx.fillRect(x + width - 30, y + 10, 20, 20);
                
                this.ctx.fillStyle = '#00FF00';
                this.ctx.fillRect(x + 10, y + height - 30, 20, 20);
            }
            
            drawSculptureDetails(x, y, width, height) {
                // Draw 3D effect for sculptures
                this.ctx.strokeStyle = '#333';
                this.ctx.lineWidth = 2;
                this.ctx.beginPath();
                this.ctx.moveTo(x + width / 2, y + 10);
                this.ctx.lineTo(x + width / 2, y + height - 10);
                this.ctx.stroke();
                
                this.ctx.beginPath();
                this.ctx.moveTo(x + 10, y + height / 2);
                this.ctx.lineTo(x + width - 10, y + height / 2);
                this.ctx.stroke();
            }
            
            drawHistoricalDetails(x, y, width, height) {
                // Draw hieroglyph-like patterns
                this.ctx.fillStyle = '#8B4513';
                for (let i = 0; i < 4; i++) {
                    this.ctx.fillRect(
                        x + 10 + i * (width - 20) / 3,
                        y + 10,
                        5,
                        height - 20
                    );
                }
            }
            
            drawLighting() {
                // Draw museum lighting
                for (let i = 0; i < 5; i++) {
                    const x = this.canvas.width * (i + 1) / 6;
                    const y = this.canvas.height * 0.25;
                    
                    // Light source
                    this.ctx.fillStyle = '#FFFACD';
                    this.ctx.beginPath();
                    this.ctx.arc(x, y, 8, 0, Math.PI * 2);
                    this.ctx.fill();
                    
                    // Light beam effect
                    const gradient = this.ctx.createRadialGradient(x, y, 0, x, y, 200);
                    gradient.addColorStop(0, 'rgba(255, 250, 205, 0.3)');
                    gradient.addColorStop(1, 'rgba(255, 250, 205, 0)');
                    
                    this.ctx.fillStyle = gradient;
                    this.ctx.fillRect(x - 200, y, 400, 300);
                }
            }
            
            animate() {
                this.updateCamera();
                
                // Clear canvas
                this.ctx.fillStyle = '#000';
                this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
                
                // Draw museum environment
                this.drawMuseum();
                this.drawLighting();
                this.drawArtworks();
                
                requestAnimationFrame(() => this.animate());
            }
        }
        
        // Initialize museum when page loads
        window.addEventListener('load', () => {
            new VirtualMuseum();
        });
    </script>
</body>
</html>